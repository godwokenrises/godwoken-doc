"use strict";(self.webpackChunkckb_sdk=self.webpackChunkckb_sdk||[]).push([[9906],{3905:function(e,t,n){n.d(t,{Zo:function(){return p},kt:function(){return m}});var r=n(7294);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var s=r.createContext({}),c=function(e){var t=r.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},p=function(e){var t=c(e.components);return r.createElement(s.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},d=r.forwardRef((function(e,t){var n=e.components,a=e.mdxType,o=e.originalType,s=e.parentName,p=l(e,["components","mdxType","originalType","parentName"]),d=c(n),m=a,k=d["".concat(s,".").concat(m)]||d[m]||u[m]||o;return n?r.createElement(k,i(i({ref:t},p),{},{components:n})):r.createElement(k,i({ref:t},p))}));function m(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var o=n.length,i=new Array(o);i[0]=d;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l.mdxType="string"==typeof e?e:a,i[1]=l;for(var c=2;c<o;c++)i[c]=n[c];return r.createElement.apply(null,i)}return r.createElement.apply(null,n)}d.displayName="MDXCreateElement"},5284:function(e,t,n){n.r(t),n.d(t,{assets:function(){return p},contentTitle:function(){return s},default:function(){return m},frontMatter:function(){return l},metadata:function(){return c},toc:function(){return u}});var r=n(7462),a=n(3366),o=(n(7294),n(3905)),i=(n(4996),["components"]),l={id:"comparisonEVM",title:"Comparison with EVM"},s=void 0,c={unversionedId:"comparisonEVM",id:"comparisonEVM",title:"Comparison with EVM",description:"",source:"@site/docs/comparisonEVM.md",sourceDirName:".",slug:"/comparisonEVM",permalink:"/next/comparisonEVM",draft:!1,tags:[],version:"current",frontMatter:{id:"comparisonEVM",title:"Comparison with EVM"},sidebar:"sidebar2",previous:{title:"Integration Guide for Ethererm Developers",permalink:"/next/integration"},next:{title:"Godwoken Web3 API Compatibility",permalink:"/next/web3Compatible"}},p={},u=[{value:"EVM revision",id:"evm-revision",level:2},{value:"pCKB",id:"pckb",level:2},{value:"Account Abstraction",id:"account-abstraction",level:2},{value:"All Tokens Are ERC20 Tokens",id:"all-tokens-are-erc20-tokens",level:2},{value:"Transaction Structure",id:"transaction-structure",level:2},{value:"Behavioral differences of some opcodes",id:"behavioral-differences-of-some-opcodes",level:2},{value:"Others",id:"others",level:2}],d={toc:u};function m(e){var t=e.components,n=(0,a.Z)(e,i);return(0,o.kt)("wrapper",(0,r.Z)({},d,n,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("p",null,"Godwoken targets 100% EVM compatibility and is designed to work with every smart contract that the latest Ethereum hard fork version supports. But, the current version is not yet fully compatible with EVM."),(0,o.kt)("h2",{id:"evm-revision"},"EVM revision"),(0,o.kt)("p",null,"The maximum EVM revision supported is\xa0",(0,o.kt)("inlineCode",{parentName:"p"},"EVMC_BERLIN"),"."),(0,o.kt)("ul",{className:"contains-task-list"},(0,o.kt)("li",{parentName:"ul",className:"task-list-item"},(0,o.kt)("input",{parentName:"li",type:"checkbox",checked:!1,disabled:!0})," "," support EVMC_LONDON"),(0,o.kt)("li",{parentName:"ul",className:"task-list-item"},(0,o.kt)("input",{parentName:"li",type:"checkbox",checked:!1,disabled:!0})," "," support EVMC_SHANGHAI")),(0,o.kt)("h2",{id:"pckb"},"pCKB"),(0,o.kt)("p",null,"Godwoken v1 introduced a new concept, ",(0,o.kt)("a",{parentName:"p",href:"https://github.com/nervosnetwork/godwoken/blob/develop/docs/life_of_a_polyjuice_transaction.md#pckb"},(0,o.kt)("strong",{parentName:"a"},"pCKB")),"."),(0,o.kt)("p",null,"In Ethereum, the gas for each smart contract is derived by calculation. And the transaction fee is then calculated by multiplying the gas with the specified gas price. In Godwoken, ",(0,o.kt)("strong",{parentName:"p"},"pCKB")," is the unit for calculating transaction fees. In other words, the gas price in Ethereum is calculated as ETH/gas (in wei, i.e. 1e-18 ether), and the gas price in Godwoken is calculated as pCKB/gas. When executing a transaction, Godwoken will deduct the transaction fee by using the layer2 ",(0,o.kt)("a",{parentName:"p",href:"https://github.com/nervosnetwork/rfcs/blob/master/rfcs/0025-simple-udt/0025-simple-udt.md"},"sUDT")," type which is represented by ",(0,o.kt)("strong",{parentName:"p"},"pCKB"),"."),(0,o.kt)("p",null,"Note that with certain transactions being sent to the smart contract, the ",(0,o.kt)("inlineCode",{parentName:"p"},"value")," of the transaction is ",(0,o.kt)("inlineCode",{parentName:"p"},"pCKB"),"."),(0,o.kt)("h2",{id:"account-abstraction"},"Account Abstraction"),(0,o.kt)("p",null,"Polyjuice only provides\xa0",(0,o.kt)("a",{parentName:"p",href:"https://ethereum.org/en/glossary/#contract-account"},"contract accounts"),". Godwoken's user accounts are leveraged as\xa0",(0,o.kt)("a",{parentName:"p",href:"https://ethereum.org/en/glossary/#eoa"},"EOAs"),"."),(0,o.kt)("h2",{id:"all-tokens-are-erc20-tokens"},"All Tokens Are ERC20 Tokens"),(0,o.kt)("p",null,"Ethereum processes ERC20 tokens differently from native ETH tokens, which is the reason wETH was invented. And, Godwoken conceals this difference:"),(0,o.kt)("p",null,"All tokens on Godwoken are represented as Layer 2 sUDT types whether using native CKB or any sUDT token type. Polyjuice proceeds from this Layer 2 sUDT ",(0,o.kt)("a",{parentName:"p",href:"https://github.com/nervosnetwork/godwoken-polyjuice/blob/b9c3ad4/solidity/erc20/SudtERC20Proxy_UserDefinedDecimals.sol"},"contract")," and ensures that all tokens on Godwoken are ERC20 compliant, regardless if supported by native CKB or sUDT. That is to say, it is unnecessary to distinguish between native tokens and ERC20 tokens. All that has to be handled is the same ERC20 interface for all the different tokens."),(0,o.kt)("h2",{id:"transaction-structure"},"Transaction Structure"),(0,o.kt)("p",null,"A Polyjuice transaction is essentially a Godwoken transaction. Ethereum transactions will be converted to the Godwoken ",(0,o.kt)("a",{parentName:"p",href:"https://github.com/nervosnetwork/godwoken/blob/v1.0.0-rc1/crates/types/schemas/godwoken.mol#L69-L74"},"RawL2Transaction")," type when being sent, and will be automatically processed by ",(0,o.kt)("a",{parentName:"p",href:"https://github.com/nervosnetwork/godwoken-web3/tree/v1.0.0-rc1"},"Godwoken Web3"),"."),(0,o.kt)("h2",{id:"behavioral-differences-of-some-opcodes"},"Behavioral differences of some opcodes"),(0,o.kt)("table",null,(0,o.kt)("thead",{parentName:"table"},(0,o.kt)("tr",{parentName:"thead"},(0,o.kt)("th",{parentName:"tr",align:null},"EVM Opcode"),(0,o.kt)("th",{parentName:"tr",align:null},"Solidity Usage"),(0,o.kt)("th",{parentName:"tr",align:null},"Behavior in Polyjuice"),(0,o.kt)("th",{parentName:"tr",align:null},"Behavior in EVM"))),(0,o.kt)("tbody",{parentName:"table"},(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:null},"COINBASE"),(0,o.kt)("td",{parentName:"tr",align:null},"block.coinbase"),(0,o.kt)("td",{parentName:"tr",align:null},"address of the block_producer"),(0,o.kt)("td",{parentName:"tr",align:null},"address of the current block miner")),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:null},"GASLIMIT"),(0,o.kt)("td",{parentName:"tr",align:null},"block.gaslimit"),(0,o.kt)("td",{parentName:"tr",align:null},"12,500,000"),(0,o.kt)("td",{parentName:"tr",align:null},"current block\u2019s gas limit")),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:null},"DIFFICULTY"),(0,o.kt)("td",{parentName:"tr",align:null},"block.difficulty"),(0,o.kt)("td",{parentName:"tr",align:null},"2,500,000,000,000,000"),(0,o.kt)("td",{parentName:"tr",align:null},"current block\u2019s difficulty")))),(0,o.kt)("h2",{id:"others"},"Others"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"Transaction context",(0,o.kt)("ul",{parentName:"li"},(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"chain_id"),"\xa0is defined in Godwoken\xa0",(0,o.kt)("a",{parentName:"li",href:"https://github.com/nervosnetwork/godwoken/blob/a099f2010b212355f5504a8d464b6b70d29640a5/crates/types/schemas/godwoken.mol#L64"},"RollupConfig#chain_id"),"."),(0,o.kt)("li",{parentName:"ul"},"the block difficulty is always\xa0",(0,o.kt)("inlineCode",{parentName:"li"},"2500000000000000")),(0,o.kt)("li",{parentName:"ul"},"the gas limit  is 12500000 per block, but it is not a transaction-level limit. Any transaction can reach the gas limit"),(0,o.kt)("li",{parentName:"ul"},"the size limit for contract's return data is\xa0",(0,o.kt)("inlineCode",{parentName:"li"},"[25600B](https://github.com/nervosnetwork/godwoken-scripts/blob/31293d1/c/gw_def.h#L21-L22)")),(0,o.kt)("li",{parentName:"ul"},"the size limit for contract's storage is\xa0",(0,o.kt)("inlineCode",{parentName:"li"},"[25600B](https://github.com/nervosnetwork/godwoken-scripts/blob/31293d1/c/gw_def.h#L21-L22)")))),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"transaction.to"),"\xa0MUST be a Contract Address","  Direct transfer of the value (pCKB) from EOA to EOA is not supported.",(0,o.kt)("blockquote",{parentName:"li"},(0,o.kt)("p",{parentName:"blockquote"},"Scenario: pCKB (CKB) is represented as an ERC20 token on layer2, which can be transferred through the\xa0sUDT_ERC20_Proxycontract\xa0transfer function."))),(0,o.kt)("li",{parentName:"ul"},"The\xa0",(0,o.kt)("inlineCode",{parentName:"li"},"transfer value"),"\xa0can not exceed uint128:MAX"),(0,o.kt)("li",{parentName:"ul"},"Pre-compiled contract",(0,o.kt)("ul",{parentName:"li"},(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"bn256_pairing"),"\xa0is not yet supported because of the high cycle cost (WIP)"),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"https://github.com/nervosnetwork/godwoken-polyjuice/blob/compatibility-breaking-changes/docs/Addition-Features.md"},"addition pre-compiled contracts"))))))}m.isMDXComponent=!0}}]);