<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-0.10.4 plugin-docs plugin-id-default docs-doc-id-comparisonEVM">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.2.0">
<title data-rh="true">Comparison with EVM | Godwoken Docs</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://docs.godwoken.io/0.10.4/comparisonEVM"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="0.10.4"><meta data-rh="true" name="docusaurus_tag" content="docs-default-0.10.4"><meta data-rh="true" name="docsearch:version" content="0.10.4"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-0.10.4"><meta data-rh="true" property="og:title" content="Comparison with EVM | Godwoken Docs"><meta data-rh="true" name="description" content="Godwoken targets 100% EVM compatibility, the plan is to back every smart contract that the latest Ethereum hard fork version supports. But there are certain things that are incompatible with EVM in the current version."><meta data-rh="true" property="og:description" content="Godwoken targets 100% EVM compatibility, the plan is to back every smart contract that the latest Ethereum hard fork version supports. But there are certain things that are incompatible with EVM in the current version."><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://docs.godwoken.io/0.10.4/comparisonEVM"><link data-rh="true" rel="alternate" href="https://docs.godwoken.io/0.10.4/comparisonEVM" hreflang="en"><link data-rh="true" rel="alternate" href="https://docs.godwoken.io/0.10.4/comparisonEVM" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://W0P1A076NN-dsn.algolia.net" crossorigin="anonymous"><link rel="preconnect" href="https://www.google-analytics.com">
<script>window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-215912231-1","auto"),ga("set","anonymizeIp",!0),ga("send","pageview")</script>
<script async src="https://www.google-analytics.com/analytics.js"></script>


<link rel="search" type="application/opensearchdescription+xml" title="Godwoken Docs" href="/opensearch.xml">
<link rel="preconnect" href="https://cryptapeblog.matomo.cloud/">
<script>var _paq=window._paq=window._paq||[];_paq.push(["setRequestMethod","POST"]),_paq.push(["trackPageView"]),_paq.push(["enableLinkTracking"]),_paq.push(["enableHeartBeatTimer"]),function(){var e="https://cryptapeblog.matomo.cloud/";_paq.push(["setRequestMethod","POST"]),_paq.push(["setTrackerUrl",e+"matomo.php"]),_paq.push(["setSiteId","2"]);var a=document,t=a.createElement("script"),p=a.getElementsByTagName("script")[0];t.type="text/javascript",t.async=!0,t.src=e+"matomo.js",p.parentNode.insertBefore(t,p)}()</script><link rel="stylesheet" href="/assets/css/styles.71663f73.css">
<link rel="preload" href="/assets/js/runtime~main.ac570351.js" as="script">
<link rel="preload" href="/assets/js/main.471b44ea.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#docusaurus_skipToContent_fallback">Skip to main content</a></div><nav class="navbar navbar--fixed-top navbarHideable_m1mJ navbar--dark"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/favicon.ico" alt="Godwoken" class="themedImage_ToTc themedImage--light_HNdA"><img src="/img/favicon.ico" alt="Godwoken" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">Godwoken Docs</b></a></div><div class="navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a aria-current="page" class="navbar__link active" aria-haspopup="true" aria-expanded="false" role="button" href="/0.10.4">0.10.4</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/">Latest</a></li><li><a class="dropdown__link" href="/1.6">1.6</a></li><li><a class="dropdown__link" href="/1.5">1.5</a></li><li><a class="dropdown__link" href="/1.4">1.4</a></li><li><a class="dropdown__link" href="/1.3-rc1">1.3-rc1</a></li><li><a class="dropdown__link" href="/1.2-rc1">1.2-rc1</a></li><li><a class="dropdown__link" href="/1.1">1.1</a></li><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/0.10.4/comparisonEVM">0.10.4</a></li></ul></div><a href="https://github.com/godwokenrises/godwoken" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><a href="https://discord.gg/TfC9rExfHh" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Discord<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebar_njMd sidebarWithHideableNavbar_wUlq"><a tabindex="-1" class="sidebarLogo_isFc" href="/"><img src="/img/favicon.ico" alt="Godwoken" class="themedImage_ToTc themedImage--light_HNdA"><img src="/img/favicon.ico" alt="Godwoken" class="themedImage_ToTc themedImage--dark_i4oU"><b>Godwoken Docs</b></a><nav class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" href="/0.10.4">Introduction</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/0.10.4">Overview</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/0.10.4/decentralizationRoadmap">Decentralization Roadmap</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/0.10.4/comparisonEVM">Comparison with EVM</a></li></ul></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/0.10.4/deployment">Deployment</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/0.10.4/deployEthDapp">Deploy Ethereum DApps to Godwoken</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/0.10.4/deposit_withdrawal">Deposit &amp; Withdraw CKB on Godwoken</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/0.10.4/withdraw_lightGodwoken">Withdrawal Demo</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/0.10.4/integration">Integration Guide for Ethererm Developers</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/0.10.4/faq">FAQ</a></li></ul></nav></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="theme-doc-version-banner alert alert--warning margin-bottom--md" role="alert"><div>This is documentation for <!-- -->Godwoken Docs<!-- --> <b>0.10.4</b>, which is no longer actively maintained.</div><div class="margin-top--md">For up-to-date documentation, see the <b><a href="/">latest version</a></b> (<!-- -->Latest<!-- -->).</div></div><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_OVgt"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Introduction</span><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Comparison with EVM</span><meta itemprop="position" content="2"></li></ul></nav><span class="theme-doc-version-badge badge badge--secondary">Version: 0.10.4</span><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Comparison with EVM</h1></header><p>Godwoken targets 100% EVM compatibility, the plan is to back every smart contract that the latest Ethereum hard fork version supports. But there are certain things that are incompatible with EVM in the current version.</p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="peth">pETH<a class="hash-link" href="#peth" title="Direct link to heading">​</a></h2><p>Godwoken introduced a new concept called pETH.</p><p>In Ethereum, the gas for each smart contract is derived by calculation, then calculating the transaction fee by multiplying the gas with a specified gas price. In Godwoken, however, pETH comes in as the unit for calculating transaction fees. In other words, the price of gas in Ethereum is ETH/gas ( denominated in wei, i. e. 1e-18 ether), while that of Godwoken is measured in pETH/gas.  When executing a transaction, Godwoken deducts the transaction fee by using tokens with the layer 2 sUDT type denoted by pETH. </p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="account-abstraction">Account Abstraction<a class="hash-link" href="#account-abstraction" title="Direct link to heading">​</a></h2><p>Godwoken only provides <a href="https://ethereum.org/en/glossary/#contract-account" target="_blank" rel="noopener noreferrer">contract accounts</a>, and the user accounts of Godwoken serve as <a href="https://ethereum.org/en/glossary/#eoa" target="_blank" rel="noopener noreferrer">EoAs</a>.</p><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="different-address-types">Different Address Types<a class="hash-link" href="#different-address-types" title="Direct link to heading">​</a></h3><ul><li>All eth_address(EoA/contract) format are <code>short_godwoken_account_script_hash</code>, which is the 20 bytes prefix of Godwoken account script hash.</li><li>Creating a contract account returns <code>short_godwoken_account_script_hash</code></li></ul><p>When passing some parameters of <a href="https://docs.soliditylang.org/en/v0.8.9/types.html#address" target="_blank" rel="noopener noreferrer">address-type</a> to call smart-contract, the <code>address</code> conversion has to be done beforehand, and vice versa to return the <code>address</code> value. Polyjuice-Provider is designed to handle these conversion tasks. It conducts <code>address</code> type conversions based on the ABI of the contract.</p><blockquote><p>Unfortunately, we are not yet able to display assets directly on metamask or other Ethereum wallets. We currently use a single web app to display users&#x27; assets. This wallet display issue will be resolved in future updates.</p></blockquote><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="transaction-structure">Transaction Structure<a class="hash-link" href="#transaction-structure" title="Direct link to heading">​</a></h2><p>A Polyjuice transaction is essentially a Godwoken transaction.</p><p>When sending an Ethereum transaction, the transaction gets converted to a Godwoken <a href="https://github.com/nervosnetwork/godwoken/blob/9a3d92/crates/types/schemas/godwoken.mol#L56-L61" target="_blank" rel="noopener noreferrer">RawL2Transaction</a> type, which is automatically processed by <a href="https://github.com/nervosnetwork/polyjuice-provider" target="_blank" rel="noopener noreferrer">Polyjuice-Provider</a>.</p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="behavioral-differences-of-some-opcodes">Behavioral Differences of Some Opcodes<a class="hash-link" href="#behavioral-differences-of-some-opcodes" title="Direct link to heading">​</a></h2><table><thead><tr><th>EVM Opcode</th><th>Solidity Usage</th><th>Behavior in Polyjuice</th><th>Behavior in EVM</th></tr></thead><tbody><tr><td>COINBASE</td><td><code>block.coinbase</code></td><td>address of the block_producer</td><td>address of the current block&#x27;s miner</td></tr><tr><td>CHAINID</td><td><code>chain_id()</code></td><td>creator_account_id</td><td>Istanbul hardfork, EIP-1344: current network&#x27;s chain id</td></tr><tr><td>GASLIMIT</td><td><code>block.gaslimit</code></td><td>12,500,000</td><td>current block&#x27;s gas limit</td></tr><tr><td>DIFFICULTY</td><td><code>block.difficulty</code></td><td>2,500,000,000,000,000</td><td>current block&#x27;s difficulty</td></tr></tbody></table><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="addition-features">Addition Features<a class="hash-link" href="#addition-features" title="Direct link to heading">​</a></h2><ul><li>pre-compiled contract<ul><li>Add <code>recover_account</code> for recover any supported signature</li><li>Add <code>balance_of_any_sudt</code> for query the balance of any sudt_id account</li><li>Add <code>transfer_to_any_sudt</code> for transfer value by sudt_id (Must collaborate with SudtErc20Proxy.sol contract)</li><li>Add <code>eth_to_godwoken_addr</code> for convert ETH address to polyjuice contract address (godwoken short address)</li></ul></li></ul><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="recover_account-spec"><code>recover_account</code> Spec<a class="hash-link" href="#recover_account-spec" title="Direct link to heading">​</a></h3><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">  Recover an EoA account script hash by signature</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  input: (the input data is from abi.encode(mesage, signature, code_hash))</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  ======</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    input[ 0..32]  =&gt; message</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    input[32..64]  =&gt; offset of signature part</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    input[64..96]  =&gt; code_hash (EoA lock hash)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    input[96..128] =&gt; length of signature data</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    input[128..]   =&gt; signature data</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  output (32 bytes):</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  =======</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    output[0..32] =&gt; account script hash</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>See: <a href="https://github.com/nervosnetwork/godwoken-polyjuice/blob/docs-evm-compatibility/polyjuice-tests/src/test_cases/evm-contracts/RecoverAccount.sol" target="_blank" rel="noopener noreferrer">Example</a></p><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="balance_of_any_sudt-spec"><code>balance_of_any_sudt</code> Spec<a class="hash-link" href="#balance_of_any_sudt-spec" title="Direct link to heading">​</a></h3><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">  Query the balance of `account_id` of `sudt_id` token.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   input:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   ======</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     input[ 0..32] =&gt; sudt_id (big endian)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     input[32..64] =&gt; address (short_address)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   output:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   =======</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     output[0..32] =&gt; amount</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>See: <a href="https://github.com/nervosnetwork/godwoken-polyjuice/blob/docs-evm-compatibility/solidity/erc20/SudtERC20Proxy.sol" target="_blank" rel="noopener noreferrer">Example</a></p><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="transfer_to_any_sudt-spec"><code>transfer_to_any_sudt</code> Spec<a class="hash-link" href="#transfer_to_any_sudt-spec" title="Direct link to heading">​</a></h3><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">  Transfer `sudt_id` token from `from_id` to `to_id` with `amount` balance.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  NOTE: This pre-compiled contract need caller to check permission of `from_id`,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  currently only `solidity/erc20/SudtERC20Proxy.sol` is allowed to call this contract.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   input:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   ======</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     input[ 0..32 ] =&gt; sudt_id (big endian)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     input[32..64 ] =&gt; from_addr (short address)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     input[64..96 ] =&gt; to_addr (short address)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     input[96..128] =&gt; amount (big endian)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   output: []</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>See: <a href="https://github.com/nervosnetwork/godwoken-polyjuice/blob/docs-evm-compatibility/solidity/erc20/SudtERC20Proxy.sol" target="_blank" rel="noopener noreferrer">Example</a></p><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="eth_to_godwoken_addr-spec"><code>eth_to_godwoken_addr</code> Spec<a class="hash-link" href="#eth_to_godwoken_addr-spec" title="Direct link to heading">​</a></h3><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain"> Calculate godwoken short address of an contract account by it&#x27;s corresponding ETH address</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> input:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> ======</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   input[12..32] =&gt; ETH address</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> output:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   output[12..32] =&gt; godwoken short address</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>See: <a href="https://github.com/nervosnetwork/godwoken-polyjuice/blob/docs-evm-compatibility/polyjuice-tests/src/test_cases/evm-contracts/EthToGodwokenAddr.sol" target="_blank" rel="noopener noreferrer">Example</a></p><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="others">Others<a class="hash-link" href="#others" title="Direct link to heading">​</a></h3><ul><li>transaction context<ul><li>chain_id is <a href="https://github.com/nervosnetwork/godwoken/blob/5735d8f/docs/life_of_a_polyjuice_transaction.md#root-account--deployment" target="_blank" rel="noopener noreferrer">creator_account_id</a></li><li>block gas limit is <code>12500000</code>, and is not block level limit, every transaction can reach the limit</li><li>block difficulty is always <code>2500000000000000</code></li></ul></li><li>The <code>transfer value</code> can not exceed uint128:MAX</li><li>pre-compiled contract<ul><li><code>bn256_pairing</code> is not supported yet，due to too high cycle cost (WIP)</li><li><a href="https://github.com/nervosnetwork/godwoken-polyjuice/blob/docs-evm-compatibility/docs/Addition-Features.md" target="_blank" rel="noopener noreferrer">addition pre-compiled contracts</a></li></ul></li></ul></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/0.10.4/decentralizationRoadmap"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Decentralization Roadmap</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/0.10.4/deployment"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Deployment</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#peth" class="table-of-contents__link toc-highlight">pETH</a></li><li><a href="#account-abstraction" class="table-of-contents__link toc-highlight">Account Abstraction</a><ul><li><a href="#different-address-types" class="table-of-contents__link toc-highlight">Different Address Types</a></li></ul></li><li><a href="#transaction-structure" class="table-of-contents__link toc-highlight">Transaction Structure</a></li><li><a href="#behavioral-differences-of-some-opcodes" class="table-of-contents__link toc-highlight">Behavioral Differences of Some Opcodes</a></li><li><a href="#addition-features" class="table-of-contents__link toc-highlight">Addition Features</a><ul><li><a href="#recover_account-spec" class="table-of-contents__link toc-highlight"><code>recover_account</code> Spec</a></li><li><a href="#balance_of_any_sudt-spec" class="table-of-contents__link toc-highlight"><code>balance_of_any_sudt</code> Spec</a></li><li><a href="#transfer_to_any_sudt-spec" class="table-of-contents__link toc-highlight"><code>transfer_to_any_sudt</code> Spec</a></li><li><a href="#eth_to_godwoken_addr-spec" class="table-of-contents__link toc-highlight"><code>eth_to_godwoken_addr</code> Spec</a></li><li><a href="#others" class="table-of-contents__link toc-highlight">Others</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2022 Godwoken. All Rights Reserved.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.ac570351.js"></script>
<script src="/assets/js/main.471b44ea.js"></script>
</body>
</html>